<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoCo ç›¸è«‡ã‚«ãƒ«ãƒ†</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background-color: #fff9f0; color: #5d4037; line-height: 1.6; }
        .container { max-width: 500px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #8d6e63; border-bottom: 2px solid #ffb74d; padding-bottom: 10px; margin-top: 0; }
        h3 { font-size: 16px; color: #ffb74d; margin-top: 25px; border-left: 4px solid #ffb74d; padding-left: 10px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 8px; font-size: 14px; }
        .flex-group { display: flex; gap: 10px; }
        .send-btn { width: 100%; padding: 15px; background-color: #ffb74d; color: white; border: none; border-radius: 30px; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 20px; }
        .note { font-size: 12px; color: #777; margin-top: 5px; }
        .toggle-btn { background-color: #eee; color: #555; padding: 5px 10px; font-size: 12px; border-radius: 5px; cursor: pointer; margin-bottom: 5px; display: inline-block; border: 1px solid #ddd; }
        .active-toggle { background-color: #ffb74d; color: white; border-color: #ffb74d; }
        .age-display { font-size: 14px; color: #e65100; font-weight: bold; margin-top: 5px; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ¾ CoCo ç›¸è«‡ã‚«ãƒ«ãƒ†</h2>

    <div class="form-group"><label>ğŸ“… è¨˜å…¥æ—¥</label><input type="date" id="date"></div>
    <div class="form-group"><label>ğŸ‘¤ é£¼ã„ä¸»ã•ã‚“å</label><input type="text" id="ownerName" required></div>
    
    <div class="flex-group">
        <div class="form-group" style="flex:2;"><label>ğŸ¶ ãƒ¯ãƒ³ã¡ã‚ƒã‚“å</label><input type="text" id="petName" required></div>
        <div class="form-group" style="flex:1;"><label>æ€§åˆ¥</label><select id="gender"><option>ç”·ã®å­</option><option>å¥³ã®å­</option></select></div>
    </div>

    <div class="form-group">
        <label>âœ‚ï¸ å»å‹¢ãƒ»é¿å¦Š</label>
        <select id="neutered">
            <option value="æœªå»å‹¢ãƒ»æœªé¿å¦Š">æœªå»å‹¢ãƒ»æœªé¿å¦Š</option>
            <option value="å»å‹¢æ¸ˆã¿">å»å‹¢æ¸ˆã¿</option>
            <option value="é¿å¦Šæ¸ˆã¿">é¿å¦Šæ¸ˆã¿</option>
        </select>
    </div>

    <div class="form-group">
        <label>ğŸ‚ å¹´é½¢ / èª•ç”Ÿæ—¥</label>
        <div>
            <span id="btnBirth" class="toggle-btn active-toggle" onclick="showInput('birth')">èª•ç”Ÿæ—¥ã‹ã‚‰è¨ˆç®—</span>
            <span id="btnManual" class="toggle-btn" onclick="showInput('manual')">æ‰‹å‹•å…¥åŠ›</span>
        </div>
        <div id="birthInputArea"><input type="date" id="birthday" onchange="calculateAge()"><div id="ageResult" class="age-display">èª•ç”Ÿæ—¥ã‚’é¸ã‚“ã§ã­</div></div>
        <div id="manualInputArea" class="hidden"><div class="flex-group"><input type="number" id="manualAgeYear" placeholder="æ­³"><input type="number" id="manualAgeMonth" placeholder="ãƒ¶æœˆ"></div></div>
    </div>

    <div class="form-group"><label>âš–ï¸ ä½“é‡</label><input type="number" id="weight" step="0.1" placeholder="kg"></div>
    <div class="form-group"><label>ğŸ¥ ã‹ã‹ã‚Šã¤ã‘ç—…é™¢</label><input type="text" id="hospital"></div>
    
    <h3>ğŸ¥ åŒ»ç™‚ãƒ»äºˆé˜²å±¥æ­´</h3>
    <label>ğŸ’‰ æœ€æ–°ãƒ¯ã‚¯ãƒãƒ³</label>
    <div class="flex-group"><input type="date" id="lVDate"><input type="text" id="lVType" placeholder="ç¨®é¡"></div>
    <label>ğŸ”™ éå»ã®å±¥æ­´</label>
    <textarea id="pastVaccineHistory" rows="3" placeholder="è©³ã—ãæ•™ãˆã¦ã­"></textarea>
    <label>ğŸ’Š ç¾åœ¨ã®ãŠè–¬</label>
    <textarea id="currentMed" rows="2"></textarea>
    <label>ğŸ”™ éå»ã®ãŠè–¬</label>
    <textarea id="pastMed" rows="2"></textarea>

    <h3>ğŸ– é£Ÿäº‹ã¨æš®ã‚‰ã—</h3>
    <textarea id="foodInfo" rows="3" placeholder="ã”ã¯ã‚“ã®å†…å®¹"></textarea>
    <label>ğŸ  é£¼è‚²ç’°å¢ƒ</label>
    <input type="text" id="environment">

    <h3>ğŸ’¬ ã”ç›¸è«‡</h3>
    <textarea id="concern" rows="4" placeholder="ç›¸è«‡ã—ãŸã„ã“ã¨"></textarea>

    <div class="form-group" style="margin-top: 20px;">
        <label>ğŸ“¸ å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</label>
        <input type="file" id="photo" accept="image/*" multiple>
        <p class="note">â€»ã”ã¯ã‚“ã€ä¾¿ã€ãƒ¯ã‚¯ãƒãƒ³è¨¼æ˜æ›¸ã®å†™çœŸãªã©ï¼ˆé€ä¿¡å¾Œã«ãƒˆãƒ¼ã‚¯ã§ã‚‚é€ã£ã¦ã­ï¼ï¼‰</p>
    </div>

    <div style="background-color: #fff3e0; padding: 15px; border-radius: 10px; margin-top: 25px; border: 1px dashed #ffb74d; text-align: center;">
        <p style="font-size: 13px; font-weight: bold; color: #e65100;">ğŸ“Š è¡€æ¶²æ¤œæŸ»çµæœãŒã‚ã‚‹æ–¹ã¯ã“ã¡ã‚‰</p>
        <button onclick="window.location.href='health.html'" style="padding: 10px 25px; background-color: #ff9800; color: white; border: none; border-radius: 25px; font-size: 14px; font-weight: bold; cursor: pointer; width: auto;">å¥åº·è¨ºæ–­å°‚ç”¨ãƒ•ã‚©ãƒ¼ãƒ ã¸</button>
    </div>

    <button class="send-btn" onclick="sendData()">CoCoã«ç›¸è«‡ã™ã‚‹</button>
</div>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
    document.getElementById('date').valueAsDate = new Date();
    liff.init({ liffId: "2008861082-o5jaHAfN" });

    let ageMode = 'birth';
    function showInput(mode) {
        ageMode = mode;
        document.getElementById('birthInputArea').classList.toggle('hidden', mode !== 'birth');
        document.getElementById('manualInputArea').classList.toggle('hidden', mode !== 'manual');
        document.getElementById('btnBirth').classList.toggle('active-toggle', mode === 'birth');
        document.getElementById('btnManual').classList.toggle('active-toggle', mode === 'manual');
    }
    function calculateAge() {
        const b = new Date(document.getElementById('birthday').value);
        const t = new Date();
        if (isNaN(b)) return;
        let y = t.getFullYear() - b.getFullYear();
        let m = t.getMonth() - b.getMonth();
        if (m < 0) { y--; m += 12; }
        document.getElementById('ageResult').innerText = `ç¾åœ¨ï¼š${y}æ­³ ${m}ãƒ¶æœˆ`;
    }
    function sendData() {
        const owner = document.getElementById('ownerName').value;
        const name = document.getElementById('petName').value;
        const weight = document.getElementById('weight').value;
        const neutered = document.getElementById('neutered').value; // å»å‹¢é¿å¦Š
        if (!owner || !name || !weight) { alert("ã€ŒãŠåå‰ã€ã¨ã€Œä½“é‡ã€ã¯å¿…ãšå…¥åŠ›ã—ã¦ã­ï¼"); return; }

        let ageVal = (ageMode === 'birth') ? document.getElementById('ageResult').innerText : `${document.getElementById('manualAgeYear').value || 0}æ­³${document.getElementById('manualAgeMonth').value || 0}ãƒ¶æœˆ`;
        
        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã«ã€Œå»å‹¢ãƒ»é¿å¦Šã€ã‚‚å…¥ã‚‹ã‚ˆã†ã«ã—ãŸã‚ˆï¼
        const msg = `ã€ç›¸è«‡ã€‘\nåå‰: ${name}\næ€§åˆ¥: ${document.getElementById('gender').value}(${neutered})\nå¹´é½¢: ${ageVal}\nå†…å®¹: ${document.getElementById('concern').value}`;
        
        liff.sendMessages([{ type: 'text', text: msg }]).then(() => { alert("é€ã£ãŸã‚ˆï¼"); liff.closeWindow(); });
    }
</script>
</body>
</html>

