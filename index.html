<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoCo ç›¸è«‡ã‚«ãƒ«ãƒ†</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background-color: #fff9f0; color: #5d4037; line-height: 1.6; }
        .container { max-width: 500px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #8d6e63; border-bottom: 2px solid #ffb74d; padding-bottom: 10px; margin-top: 0; }
        h3 { font-size: 16px; color: #ffb74d; margin-top: 25px; border-left: 4px solid #ffb74d; padding-left: 10px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 8px; font-size: 14px; }
        .flex-group { display: flex; gap: 10px; }
        button { width: 100%; padding: 15px; background-color: #ffb74d; color: white; border: none; border-radius: 30px; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 20px; }
        .note { font-size: 12px; color: #777; margin-top: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ¾ CoCo ç›¸è«‡ã‚«ãƒ«ãƒ†</h2>

    <div class="form-group">
        <label for="date">ğŸ“… è¨˜å…¥æ—¥</label>
        <input type="date" id="date">
    </div>

    <div class="form-group">
        <label for="ownerName">ğŸ‘¤ é£¼ã„ä¸»ã•ã‚“ã®ãŠåå‰</label>
        <input type="text" id="ownerName" placeholder="ã‚ãªãŸã®ãŠåå‰" required>
    </div>

    <div class="flex-group">
        <div class="form-group" style="flex:2;">
            <label for="petName">ğŸ¶ ãƒ¯ãƒ³ã¡ã‚ƒã‚“å</label>
            <input type="text" id="petName" required>
        </div>
        <div class="form-group" style="flex:1;">
            <label>æ€§åˆ¥</label>
            <select id="gender"><option value="ç”·ã®å­">ç”·ã®å­</option><option value="å¥³ã®å­">å¥³ã®å­</option></select>
        </div>
    </div>

    <div class="form-group">
        <label>ğŸ‚ å¹´é½¢ / âš–ï¸ ä½“é‡</label>
        <div class="flex-group">
            <input type="number" id="ageYear" placeholder="æ­³">
            <input type="number" id="ageMonth" placeholder="ãƒ¶æœˆ">
            <input type="number" id="weight" step="0.1" placeholder="kg">
        </div>
    </div>

    <div class="form-group">
        <label for="hospital">ğŸ¥ ã‹ã‹ã‚Šã¤ã‘ã®å‹•ç‰©ç—…é™¢</label>
        <input type="text" id="hospital" placeholder="é€šã£ã¦ã„ã‚‹ç—…é™¢å">
    </div>

    <h3>ğŸ¥ åŒ»ç™‚ãƒ»äºˆé˜²å±¥æ­´</h3>
    <div class="form-group">
        <label>ğŸ’‰ æœ€æ–°ã®ãƒ¯ã‚¯ãƒãƒ³ãƒ»äºˆé˜²æ¥ç¨®</label>
        <div class="flex-group">
            <input type="date" id="lastVaccineDate">
            <input type="text" id="lastVaccineType" placeholder="ç¨®é¡ï¼ˆ5ç¨®ã€ç‹‚çŠ¬ç—…ãªã©ï¼‰">
        </div>
    </div>
    <div class="form-group">
        <label>ğŸ”™ éå»ã®ãƒ¯ã‚¯ãƒãƒ³å±¥æ­´ãƒ»ä½“èª¿å¤‰åŒ–</label>
        <textarea id="pastVaccineHistory" rows="3" placeholder="æ¥ç¨®å›æ•°ã‚„ã€æ™‚æœŸã€ãã®å¾Œã®ä½“èª¿å¤‰åŒ–ãªã©ã€‚è…¸å†…ç’°å¢ƒã®å¤‰åŒ–ã‚’è¿½ã†ãŸã‚ã€ãªã‚‹ã¹ãè©³ã—ãæ•™ãˆã¦ã­ã€‚"></textarea>
    </div>
    <div class="form-group">
        <label>ğŸ’Š ç¾åœ¨æœç”¨ä¸­ã®ãŠè–¬ãƒ»ã‚µãƒ—ãƒª</label>
        <textarea id="currentMed" rows="2" placeholder="ä»Šé£²ã‚“ã§ã„ã‚‹ã‚‚ã®"></textarea>
    </div>
    <div class="form-group">
        <label>ğŸ”™ éå»ã«æœç”¨ã—ã¦ã„ãŸãŠè–¬</label>
        <textarea id="pastMed" rows="2" placeholder="ä»¥å‰é•·ãé£²ã‚“ã§ã„ãŸã‚‚ã®ï¼ˆæŠ—ç”Ÿå‰¤ã€ã‚¹ãƒ†ãƒ­ã‚¤ãƒ‰ç­‰ï¼‰"></textarea>
    </div>

    <h3>ğŸ– é£Ÿäº‹ã¨æš®ã‚‰ã—</h3>
    <div class="form-group">
        <label>ğŸ¥£ é£Ÿäº‹ã®å†…å®¹</label>
        <textarea id="foodInfo" rows="3" placeholder="ãƒ•ãƒ¼ãƒ‰åã€æ‰‹ä½œã‚Šé£Ÿã®å†…å®¹ã€ãŠã‚„ã¤ã®ç¨®é¡ã‚„é‡"></textarea>
    </div>
    <div class="form-group">
        <label>ğŸ  é£¼è‚²ç’°å¢ƒ</label>
        <input type="text" id="environment" placeholder="ä¾‹ï¼š1é ­é£¼ã„ãƒ»å˜èº«ã€å¤šé ­é£¼ã„ã€ç•™å®ˆç•ªæ™‚é–“ãªã©">
    </div>

    <div style="background-color: #fff3e0; padding: 15px; border-radius: 10px; margin: 25px 0; border: 1px dashed #ffb74d; text-align: center;">
        <p style="font-size: 13px; margin: 0 0 10px 0; color: #e65100; font-weight: bold;">ğŸ“Š è¡€æ¶²æ¤œæŸ»ãªã©ã®çµæœãŒã‚ã‚‹æ–¹ã¯ã“ã¡ã‚‰</p>
        <button onclick="goToHealthCheck()" style="padding: 8px 20px; background-color: #ff9800; font-size: 14px; width: auto; margin-top: 0;">å¥åº·è¨ºæ–­å°‚ç”¨ãƒ•ã‚©ãƒ¼ãƒ ã¸</button>
    </div>

    <h3>ğŸ’¬ ã”ç›¸è«‡</h3>
    <div class="form-group">
        <label>ğŸ“¸ å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</label>
        <input type="file" id="photo" accept="image/*" multiple>
        <p class="note">â€»ã”ã¯ã‚“ã€ä¾¿ã€ãƒ¯ã‚¯ãƒãƒ³è¨¼æ˜æ›¸ã®å†™çœŸãªã©ï¼ˆé€ä¿¡å¾Œã«ãƒˆãƒ¼ã‚¯ã§ã‚‚é€ã£ã¦ã­ï¼ï¼‰</p>
    </div>
    <div class="form-group">
        <label for="concern">ğŸ¾ ç›¸è«‡ã—ãŸã„ã“ã¨ãƒ»ä¸å®‰ãªã“ã¨</label>
        <textarea id="concern" rows="4" placeholder="ã©ã‚“ãªå°ã•ãªã“ã¨ã§ã‚‚CoCoã«æ•™ãˆã¦ã­ã€‚"></textarea>
    </div>

    <button onclick="sendData()">CoCoã«ç›¸è«‡ã™ã‚‹</button>
</div>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
    document.getElementById('date').valueAsDate = new Date();

    // ãã‚‡ã‚“ã“ã®IDã‚’ã‚»ãƒƒãƒˆã—ãŸã‚ˆ
    liff.init({ liffId: "2008861082-o5jaHAfN" }).catch(err => console.error(err));

    function goToHealthCheck() {
        window.location.href = "health.html";
    }

    function sendData() {
        const d = document.getElementById('date').value;
        const owner = document.getElementById('ownerName').value;
        const name = document.getElementById('petName').value;
        const gender = document.getElementById('gender').value;
        const age = `${document.getElementById('ageYear').value || 0}æ­³${document.getElementById('ageMonth').value || 0}ãƒ¶æœˆ`;
        const weight = document.getElementById('weight').value;
        const hosp = document.getElementById('hospital').value;
        const lVDate = document.getElementById('lastVaccineDate').value;
        const lVType = document.getElementById('lastVaccineType').value;
        const pVaccine = document.getElementById('pastVaccineHistory').value;
        const currentMed = document.getElementById('currentMed').value;
        const pastMed = document.getElementById('pastMed').value;
        const food = document.getElementById('foodInfo').value;
        const env = document.getElementById('environment').value;
        const concern = document.getElementById('concern').value;

        if (!owner || !name || !weight) {
            alert("ã€ŒãŠåå‰ã€ã¨ã€Œä½“é‡ã€ã¯å¿…ãšå…¥åŠ›ã—ã¦ã­ï¼");
            return;
        }

        const message = `ã€CoCoç›¸è«‡ã‚«ãƒ«ãƒ† ${d}ã€‘\n` +
                        `é£¼ã„ä¸»: ${owner}æ§˜\n` +
                        `ãƒ¯ãƒ³ã¡ã‚ƒã‚“: ${name} (${gender})\n` +
                        `å¹´é½¢: ${age} / ä½“é‡: ${weight}kg\n` +
                        `ç—…é™¢: ${hosp || 'æœªè¨˜å…¥'}\n\n` +
                        `[æœ€æ–°ãƒ¯ã‚¯ãƒãƒ³] ${lVDate || 'ä¸æ˜'} (${lVType || 'ä¸æ˜'})\n\n` +
                        `[éå»ãƒ¯ã‚¯ãƒãƒ³å±¥æ­´]\n${pVaccine || 'ãªã—'}\n\n` +
                        `[ç¾åœ¨ã®ãŠè–¬]\n${currentMed || 'ãªã—'}\n\n` +
                        `[éå»ã®ãŠè–¬]\n${pastMed || 'ãªã—'}\n\n` +
                        `[é£Ÿäº‹å†…å®¹]\n${food || 'æœªè¨˜å…¥'}\n\n` +
                        `[é£¼è‚²ç’°å¢ƒ]\n${env || 'æœªè¨˜å…¥'}\n\n` +
                        `[ç›¸è«‡å†…å®¹]\n${concern}`;

        liff.sendMessages([{ type: 'text', text: message }])
            .then(() => {
                alert("CoCoã«ç›¸è«‡ã‚’é€ã£ãŸã‚ˆï¼å†™çœŸã¯LINEã®ãƒˆãƒ¼ã‚¯ã§ãã®ã¾ã¾é€ã£ã¦ã­ã€‚");
                liff.closeWindow();
            })
            .catch(err => {
                console.error(err);
                alert("é€ä¿¡ã«å¤±æ•—ã—ã¡ã‚ƒã£ãŸã€‚LINEã‚¢ãƒ—ãƒªã®ä¸­ã§é–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ã­ã€‚");
            });
    }
</script>
</body>
</html>
